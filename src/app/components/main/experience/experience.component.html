<h2 class="text-3xl font-bold text-center mb-8">Experience</h2>

<ng-container *ngFor="let company of timeline; let i = index">
    <div class="bg-[#e6e7ee] rafe shadow-inset rounded-lg shadow-2xl">
        <div class="flex items-center mb-4 relative ml-5">
            <!-- Company logo -->
            <img class="h-8 mr-3 mt-2" [src]="company.logo" [alt]="company.company_name">
            <h3 class="text-lg font-semibold text-gray-900 mt-2">{{ company.company_name }}</h3>
        </div>

        <div [class.border-green-500]="company.active" [class.border-blue-200]="!company.active"
            class="border-l-2 pl-6 ml-5">
            <ol>
                <li *ngFor="let position of company.positions" class="mb-6">
                    <div class="mb-2">
                        <h4 class="text-base font-semibold text-gray-800">{{ position.title }}</h4>
                        <p class="text-sm font-normal text-gray-500">{{ position.tenure }}</p>
                    </div>

                    <div class="pl-6">
                        <!-- Responsibilities -->
                        <h5 class="text-base font-semibold text-gray-800 mb-2">Responsibilities:</h5>
                        <ul class="list-disc list-inside">
                            <ng-container *ngFor="let responsibility of position.responsibilities; let index = index">
                                <li *ngIf="index < 3 || position.showAllResponsibilities">{{ responsibility }}</li>
                            </ng-container>
                        </ul>
                        <!-- View More for Responsibilities -->
                        <div *ngIf="position.responsibilities.length > 3" class="mb-2">
                            <button class="text-sm text-blue-500 hover:underline focus:outline-none"
                                (click)="toggleResponsibilities(position)">
                                {{ position.showAllResponsibilities ? 'View Less' : 'View More' }}
                            </button>
                        </div>
                        <!-- Accomplishments -->
                        <h5 class="text-base font-semibold text-gray-800 mb-2">Accomplishments:</h5>
                        <ul class="list-disc list-inside">
                            <ng-container *ngFor="let accomplishment of position.accomplishments; let index = index">
                                <li *ngIf="index < 3 || position.showAllAccomplishments">{{ accomplishment }}</li>
                            </ng-container>
                        </ul>
                        <!-- View More for Accomplishments -->
                        <div *ngIf="position.accomplishments.length > 3">
                            <button class="text-sm text-blue-500 hover:underline focus:outline-none"
                                (click)="toggleAccomplishments(position)">
                                {{ position.showAllAccomplishments ? 'View Less' : 'View More' }}
                            </button>
                        </div>
                    </div>
                </li>
            </ol>
        </div>
    </div>
</ng-container>